<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition template="/template/page-standard.xhtml"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
     xmlns:ui="http://java.sun.com/jsf/facelets">>

	 <f:metadata>
		 <f:viewParam name="id" value="#{modelOuvrage.courant.idOuvrage}" />
		 <f:viewAction action="#{modelOuvrage.actualiserCourant()}" />
	 </f:metadata>

    <ui:define name="titre">Ajouter un Ouvrage</ui:define>

    <ui:define name="contenu">

	<h:form enctype="multipart/form-data">
	
		<table class="form">
			<tr>
				<td>
					<h:outputLabel for="id">Id :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="id" size="5" readonly="true"
						value="#{modelOuvrage.courant.idOuvrage}" class="input"/>
					<br /><h:message for="id" errorClass="error"/>
				</td>
			</tr>
			<tr>
				<td>
					<h:outputLabel for="titre">Titre :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="titre" size="25" 
						value="#{modelOuvrage.courant.titre}" class="input"/>
					<br /><h:message for="titre" errorClass="error"/>
				</td>
			</tr>
			
			<tr>
				<td>
					<h:outputLabel for="dateParution">Date de parution :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="dateParution" a:type="date" value="#{modelOuvrage.courant.dateParution}" />
					<br /><h:message for="dateParution" errorClass="error"/>
				</td>
			</tr>
			
			<tr>
				<td>
					<h:outputLabel for="dateAchat">Date d'Achat :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="dateAchat" a:type="date" value="#{modelOuvrage.courant.dateAchat}" />
					<br /><h:message for="dateAchat" errorClass="error"/>
				</td>
			</tr>
			
			<!-- image livre
			<tr>
				<td>
					<h:outputLabel for="dateAchat">Date d'Achat :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="dateAchat" size="25" 
						value="#{modelOuvrage.courant.dateAchat}" />
					<br /><h:message for="dateAchat" errorClass="error"/>
				</td>
			</tr> -->
			
			<tr>
				<td>
					<h:outputLabel for="imageLivre">Image :</h:outputLabel>				
				</td>
				<td>
					<h:inputFile id="imageLivre" value="#{modelOuvrage.courant.uploadedFile}"
								required="true"
								requiredMessage="Please upload a file"
								alt="Upload file"
					></h:inputFile>
					<br /><h:message for="imageLivre" errorClass="error"/>
				</td>
			</tr>
			
			<tr>
				<td>
					<h:outputLabel for="langueLivre">Langue :</h:outputLabel>				
				</td>
				<!-- <td>
					<h:inputText id="langueLivre" size="25" 
						value="#{modelOuvrage.courant.langueLivre}" class="input"/>
					<br /><h:message for="langueLivre" errorClass="error"/>
				</td> -->
				<td>
					<h:selectOneMenu value="#{modelOuvrage.courant.langueLivre}">
					    <f:selectItems value="#{modelOuvrage.listeLangues}" var="option" itemValue="#{option}" itemLabel="#{option}" />
					</h:selectOneMenu>
				</td>
			</tr>
			
			<tr>
				<td><h:outputLabel for="categorie">Cat√©gorie :</h:outputLabel>
					</td>
					<td><h:selectOneMenu id="categorie"
							value="#{modelOuvrage.courant.categorie}"
							converter="#{converterCategorie}">
							<f:selectItems value="#{modelCategorie.liste}" var="item"
								itemLabel="#{item.nomCategorie}" />
						</h:selectOneMenu> <br />
					<h:message for="categorie" errorClass="error" /></td>
			</tr>
			
			<tr>
				<td><h:outputLabel for="auteur">Auteur :</h:outputLabel>
					</td>
					<td><h:selectOneMenu id="auteur"
							value="#{modelOuvrage.courant.auteur}"
							converter="#{converterAuteur}">
							<f:selectItems value="#{modelAuteur.liste}" var="item"
								itemLabel="#{item.nom} #{item.prenom}"  />
						</h:selectOneMenu> <br />
					<h:message for="auteur" errorClass="error" /></td>
			</tr>
			
			<!--<tr>
				<td>
					<h:outputLabel for="personne">Personne :</h:outputLabel>				
				</td>
				<td>
					<h:inputText id="personne" size="25" 
						value="#{modelPersonne.courant.nom}" />
					<br /><h:message for="personne" errorClass="error"/>
				</td>
			</tr> -->
			<tr>
				<td><h:outputLabel for="personne">Personne :</h:outputLabel>
					</td>
					<td><h:selectOneMenu id="personne"
							value="#{modelOuvrage.courant.personne}"
							converter="#{converterPersonne}">
							<f:selectItems value="#{modelPersonne.getPersonneParCompte(modelConnexion.compteActif)}" var="item"
								itemLabel="#{item.nom}" />
						</h:selectOneMenu> <br />
					<h:message for="personne" errorClass="error" /></td>
			</tr>
			
		</table>

		<br /> 
		<h:commandButton value="Valider" 
			action="#{modelOuvrage.validerMiseAJour()}" class="submit"/>
		<h:button value="Retour" outcome="listeOuvrages" class="submit"/>
	</h:form>

	</ui:define>

</ui:composition>